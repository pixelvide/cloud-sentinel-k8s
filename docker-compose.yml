services:
  backend:
    build:
      context: ./
      dockerfile: backend/Dockerfile
    environment:
      - GIN_MODE=${GIN_MODE:-release}
      - DB_TYPE=${DB_TYPE:-postgres}
      - DB_DSN=${DB_DSN}
      - OIDC_ISSUER=${OIDC_ISSUER}
      - OIDC_CLIENT_ID=${OIDC_CLIENT_ID}
      - OIDC_CLIENT_SECRET=${OIDC_CLIENT_SECRET}
      - FRONTEND_URL=${FRONTEND_URL:-http://localhost:3000}
      - CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000
    ports:
      - "${FRONTEND_PORT:-3000}:8080"
    ulimits:
      nofile:
        soft: 65536
        hard: 65536
